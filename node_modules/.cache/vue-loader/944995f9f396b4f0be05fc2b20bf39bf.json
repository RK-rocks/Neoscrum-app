{"remainingRequest":"/home/webwerks/Documents/Vuejs_Vuex_starter/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/webwerks/Documents/Vuejs_Vuex_starter/src/views/auth/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/webwerks/Documents/Vuejs_Vuex_starter/src/views/auth/Login.vue","mtime":1592486768000},{"path":"/home/webwerks/Documents/Vuejs_Vuex_starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/webwerks/Documents/Vuejs_Vuex_starter/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/webwerks/Documents/Vuejs_Vuex_starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/webwerks/Documents/Vuejs_Vuex_starter/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgcmVxdWlyZWQsIG1pbkxlbmd0aCB9IGZyb20gJ3Z1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyc7CmltcG9ydCBBdXRoU2VydmljZSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hdXRoLnNlcnZpY2UnOwppbXBvcnQgTG9jYWxTdG9yYWdlU2VydmljZSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9sb2NhbFN0b3JhZ2Uuc2VydmljZSc7CmltcG9ydCBDcnlwdG9KUyBmcm9tICdjcnlwdG8tanMnCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN1Ym1pdHRlZDogZmFsc2UsCiAgICAgIGVtYWlsOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICByZXFPYmo6IHt9LAogICAgICB1cmw6ICcnLAogICAgICBhdXRoU2VydmljZTogbmV3IEF1dGhTZXJ2aWNlKCksCiAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UgOiBuZXcgTG9jYWxTdG9yYWdlU2VydmljZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgaXNMb2dpbjogJ2F1dGgvaXNMb2dpbicKICAgIH0pCiAgfSwKICBjcmVhdGVkKCl7CiAgICBjb25zb2xlLmxvZygiaW4gbG9naW4gc3RvcmUgb2JqZWN0IikKICAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlKQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucygnYXV0aCcsIFsnbG9naW5TdWNjZXNzJywgJ2xvZ291dCddKSwKICAgIGFzeW5jIGxvZ2luVXNlckZvcm0oKSB7CiAgICAgIGNvbnNvbGUubG9nKCJpbiBsb2dpbiBwYWdlIikKICAgICAgY29uc29sZS5sb2codGhpcy5sb2dpblN1Y2Nlc3MpCiAgICAgIHRoaXMubG9naW5TdWNjZXNzKCk7CiAgICAgIHRoaXMuc3VibWl0dGVkID0gdHJ1ZTsKICAgICAgaWYgKHRoaXMuJHYuJGludmFsaWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5yZXFPYmogPSB7CiAgICAgICAgdXNlcl9lbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICB1c2VyX3Bhc3M6IHRoaXMucGFzc3dvcmQKICAgICAgfTsKICAgICAgdGhpcy51cmwgPSAnaHR0cDovLzE4MC4xNDkuMjQxLjIwODozMDAwL2xvZ2luJzsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmF1dGhTZXJ2aWNlLnBvc3RSZXF1ZXN0KHRoaXMudXJsLCB0aGlzLnJlcU9iaik7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MgPT09ICdmYWxzZScpIHsKICAgICAgICAgIGFsZXJ0KHJlcy5tZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5sb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldFRva2VuKHJlcy50b2tlbikKICAgICAgICAgIGxldCB0b2tlbiA9IGF3YWl0IHRoaXMubG9jYWxTdG9yYWdlU2VydmljZS5nZXRUb2tlbigpCiAgICAgICAgICB0aGlzLmxvZ2luU3VjY2Vzcyh0b2tlbik7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgLy8gbGV0IHNldFRva2VuID0gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzLnRva2VuKTsKICAgICAgICAgIC8vIHZhciBjaXBoZXJ0ZXh0ID0gQ3J5cHRvSlMuQUVTLmVuY3J5cHQocmVzLnRva2VuLCAnc2VjcmV0IGtleSAxMjMnKS50b1N0cmluZygpOwogICAgICAgICAgLy8gY29uc29sZS5sb2coY2lwaGVydGV4dCkKCgogICAgICAgICAgLy8gRGVjcnlwdAogICAgICAgICAgLy8gdmFyIGJ5dGVzICA9IENyeXB0b0pTLkFFUy5kZWNyeXB0KGNpcGhlcnRleHQsICdzZWNyZXQga2V5IDEyMycpOwogICAgICAgICAgLy8gdmFyIG9yaWdpbmFsVGV4dCA9IGJ5dGVzLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5VdGY4KTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG9yaWdpbmFsVGV4dCk7CgogICAgICAgICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpewogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYXV0aC9sb2dpblN1Y2Nlc3MnKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7CiAgICAgIH0KICAgIH0sCiAgfSwKICB2YWxpZGF0aW9uczogewogICAgZW1haWw6IHsKICAgICAgcmVxdWlyZWQsCiAgICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoKDQpCiAgICB9LAogICAgcGFzc3dvcmQ6IHsKICAgICAgcmVxdWlyZWQsCiAgICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoKDQpCiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/auth","sourcesContent":["<template>\n  <!-- eslint-disable -->\n  <div class=\"login-page pa50\">\n    <h1 class=\"heading\">\n      <label class=\"neo\">Neo</label>\n      <label class=\"scrum\">SCRUM</label>\n    </h1>\n    <div class=\"loginForm\">\n      <form @submit.prevent=\"loginUserForm\" class=\"shadow-lg p-3 mb-5 bg-white rounded loginForm\">\n        <fieldset>\n          <legend>User-login</legend>\n          <div class=\"form-group\">\n            <label for=\"uname\">Email:</label>\n            <input\n              :class=\"{ error: submitted && $v.email.$invalid }\"\n              type=\"email\"\n              v-model=\"email\"\n              class=\"form-control\"\n              id=\"uname\"\n              placeholder=\"Enter username\"\n              name=\"uname\"\n            />\n            <div v-if=\"submitted\">\n              <div v-if=\"!$v.email.required\">\n                <p class=\"text-red text-left\">Email is required</p>\n              </div>\n            </div>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"pwd\">Password:</label>\n            <input\n              :class=\"{ error: submitted && $v.password.$invalid }\"\n              v-model=\"password\"\n              type=\"password\"\n              class=\"form-control\"\n              id=\"pwd\"\n              placeholder=\"Enter password\"\n              name=\"pswd\"\n            />\n            <div v-if=\"submitted\">\n              <div v-if=\"!$v.password.required\">\n                <p class=\"text-red text-left\">Password is required</p>\n              </div>\n            </div>\n          </div>\n          <button type=\"submit\" class=\"btn btn-primary mr10\">Login</button>\n          <a @click=\"$router.push('signup')\">Registration</a>\n        </fieldset>\n      </form>\n    </div>\n  </div>\n  <!-- eslint-disable -->\n</template>\n<script>\nimport { mapActions, mapGetters } from 'vuex';\nimport { required, minLength } from 'vuelidate/lib/validators';\nimport AuthService from '../../services/auth.service';\nimport LocalStorageService from '../../services/localStorage.service';\nimport CryptoJS from 'crypto-js'\n\nexport default {\n  data() {\n    return {\n      submitted: false,\n      email: '',\n      password: '',\n      reqObj: {},\n      url: '',\n      authService: new AuthService(),\n      localStorageService : new LocalStorageService\n    };\n  },\n  computed: {\n    ...mapGetters({\n      isLogin: 'auth/isLogin'\n    })\n  },\n  created(){\n    console.log(\"in login store object\")\n    console.log(this.$store)\n  },\n  methods: {\n    ...mapActions('auth', ['loginSuccess', 'logout']),\n    async loginUserForm() {\n      console.log(\"in login page\")\n      console.log(this.loginSuccess)\n      this.loginSuccess();\n      this.submitted = true;\n      if (this.$v.$invalid) {\n        return;\n      }\n      this.reqObj = {\n        user_email: this.email,\n        user_pass: this.password\n      };\n      this.url = 'http://180.149.241.208:3000/login';\n      try {\n        const res = await this.authService.postRequest(this.url, this.reqObj);\n        console.log(res);\n        if (res.success === 'false') {\n          alert(res.message);\n        } else {\n          this.localStorageService.setToken(res.token)\n          let token = await this.localStorageService.getToken()\n          this.loginSuccess(token);\n          console.log(res);\n          // let setToken = localStorage.setItem('token', res.token);\n          // var ciphertext = CryptoJS.AES.encrypt(res.token, 'secret key 123').toString();\n          // console.log(ciphertext)\n\n\n          // Decrypt\n          // var bytes  = CryptoJS.AES.decrypt(ciphertext, 'secret key 123');\n          // var originalText = bytes.toString(CryptoJS.enc.Utf8);\n          // console.log(originalText);\n\n          if(localStorage.getItem('token')){\n            this.$store.dispatch('auth/loginSuccess');\n            this.$router.push('/');\n          }\n        }\n      } catch (error) {\n        alert(error.message);\n      }\n    },\n  },\n  validations: {\n    email: {\n      required,\n      minLength: minLength(4)\n    },\n    password: {\n      required,\n      minLength: minLength(4)\n    }\n  }\n};\n</script>\n"]}]}