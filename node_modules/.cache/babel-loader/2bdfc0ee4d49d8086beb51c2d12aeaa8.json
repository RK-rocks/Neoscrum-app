{"remainingRequest":"/home/webwerks/Documents/Vuejs_Vuex_starter/node_modules/babel-loader/lib/index.js!/home/webwerks/Documents/Vuejs_Vuex_starter/src/utils/httpInterceptors.js","dependencies":[{"path":"/home/webwerks/Documents/Vuejs_Vuex_starter/src/utils/httpInterceptors.js","mtime":1592478792910},{"path":"/home/webwerks/Documents/Vuejs_Vuex_starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/webwerks/Documents/Vuejs_Vuex_starter/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7IC8vIGltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7aW1wb3J0IHsgc3RvcmUgfSBmcm9tICcuLi9zdG9yZS9zdG9yZScKCmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7CmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGZ1bmN0aW9uIHNldHVwSW50ZXJjZXB0b3JzKF9yZWYpIHsKICB2YXIgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLAogICAgICBtYXBHZXR0ZXJzID0gX3JlZi5tYXBHZXR0ZXJzOwogIGNvbnNvbGUubG9nKCJzdG9yZSBvYmplY3QgaW4gaW50ZXJjZXB0b3IiKTsgLy8gY29uc29sZS5sb2cobWFwQWN0aW9ucygnYXV0aCcsIFsnbG9hZGVyJ10pKQogIC8vIGNvbnNvbGUubG9nKHRoaXMubG9hZGVyKQoKICB2YXIgcmVxdWVzdHNQZW5kaW5nID0gMDsKICB2YXIgcmVxID0gewogICAgcGVuZGluZzogZnVuY3Rpb24gcGVuZGluZygpIHsKICAgICAgcmVxdWVzdHNQZW5kaW5nKys7CiAgICAgIGRpc3BhdGNoKCJhdXRoL2xvYWRlciIsIHRydWUpOwogICAgICBjb25zb2xlLmxvZyhzdG9yZS5zdGF0ZS5hdXRoLmxvYWRlcik7CiAgICB9LAogICAgZG9uZTogZnVuY3Rpb24gZG9uZSgpIHsKICAgICAgcmVxdWVzdHNQZW5kaW5nLS07CgogICAgICBpZiAocmVxdWVzdHNQZW5kaW5nIDw9IDApIHsKICAgICAgICBkaXNwYXRjaCgiYXV0aC9sb2FkZXIiLCBmYWxzZSk7CiAgICAgICAgY29uc29sZS5sb2coc3RvcmUuc3RhdGUuYXV0aC5sb2FkZXIpOwogICAgICB9CiAgICB9CiAgfTsKICBheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogICAgcmVxLnBlbmRpbmcoKTsKICAgIHJldHVybiBjb25maWc7CiAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICByZXF1ZXN0c1BlbmRpbmctLTsKICAgIHJlcS5kb25lKCk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0pOwogIGF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7CiAgICByZXEuZG9uZSgpOwogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkYXRhKTsKICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgIHJlcS5kb25lKCk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0pOwp9"},{"version":3,"sources":["/home/webwerks/Documents/Vuejs_Vuex_starter/src/utils/httpInterceptors.js"],"names":["axios","store","mapActions","mapGetters","setupInterceptors","dispatch","console","log","requestsPending","req","pending","state","auth","loader","done","interceptors","request","use","config","error","Promise","reject","response","data","resolve"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,SACEC,UADF,EAEEC,UAFF,QAGO,MAHP;AAIA,OAAO,SAASC,iBAAT,OAEJ;AAAA,MADDC,QACC,QADDA,QACC;AAAA,MADSF,UACT,QADSA,UACT;AACDG,EAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EADC,CAED;AACA;;AACA,MAAIC,eAAe,GAAG,CAAtB;AACA,MAAMC,GAAG,GAAG;AACVC,IAAAA,OAAO,EAAE,mBAAM;AACbF,MAAAA,eAAe;AACfH,MAAAA,QAAQ,CAAC,aAAD,EAAgB,IAAhB,CAAR;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYN,KAAK,CAACU,KAAN,CAAYC,IAAZ,CAAiBC,MAA7B;AACD,KALS;AAMVC,IAAAA,IAAI,EAAE,gBAAM;AACVN,MAAAA,eAAe;;AACf,UAAIA,eAAe,IAAI,CAAvB,EAA0B;AACxBH,QAAAA,QAAQ,CAAC,aAAD,EAAgB,KAAhB,CAAR;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYN,KAAK,CAACU,KAAN,CAAYC,IAAZ,CAAiBC,MAA7B;AAED;AACF;AAbS,GAAZ;AAeAb,EAAAA,KAAK,CAACe,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACE,UAACC,MAAD,EAAY;AACVT,IAAAA,GAAG,CAACC,OAAJ;AACA,WAAOQ,MAAP;AACD,GAJH,EAKE,UAACC,KAAD,EAAW;AACTX,IAAAA,eAAe;AACfC,IAAAA,GAAG,CAACK,IAAJ;AACA,WAAOM,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,GATH;AAWAnB,EAAAA,KAAK,CAACe,YAAN,CAAmBO,QAAnB,CAA4BL,GAA5B,CACE,iBAEM;AAAA,QADJM,IACI,SADJA,IACI;AACJd,IAAAA,GAAG,CAACK,IAAJ;AACA,WAAOM,OAAO,CAACI,OAAR,CAAgBD,IAAhB,CAAP;AACD,GANH,EAOE,UAACJ,KAAD,EAAW;AACTV,IAAAA,GAAG,CAACK,IAAJ;AACA,WAAOM,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,GAVH;AAYD","sourcesContent":["import axios from \"axios\";\n// import store from '../store';import { store } from '../store/store'\nimport store from '../store'\nimport {\n  mapActions,\n  mapGetters\n} from 'vuex';\nexport function setupInterceptors({\n  dispatch, mapGetters\n}) {\n  console.log(\"store object in interceptor\")\n  // console.log(mapActions('auth', ['loader']))\n  // console.log(this.loader)\n  let requestsPending = 0;\n  const req = {\n    pending: () => {\n      requestsPending++;\n      dispatch(\"auth/loader\", true);\n      console.log(store.state.auth.loader)\n    },\n    done: () => {\n      requestsPending--;\n      if (requestsPending <= 0) {\n        dispatch(\"auth/loader\", false);\n        console.log(store.state.auth.loader)\n\n      }\n    },\n  };\n  axios.interceptors.request.use(\n    (config) => {\n      req.pending();\n      return config;\n    },\n    (error) => {\n      requestsPending--;\n      req.done();\n      return Promise.reject(error);\n    }\n  );\n  axios.interceptors.response.use(\n    ({\n      data\n    }) => {\n      req.done();\n      return Promise.resolve(data);\n    },\n    (error) => {\n      req.done();\n      return Promise.reject(error);\n    }\n  );\n}\n"]}]}